(reset)
(batch crc.clp)
; Set settings for the CRC system
(crc (policy 0))
; Set seed for random number generator to ensure reproducibility
(seed 1423)

(defrule crossing "crossing"
  ?c <- (car (from ?f) (to ?t) (arrival ?a) (departure nil))
        (not (car (arrival ?a2&:(< ?a2 ?a)) (departure nil)))
  ?turn <- (turn ?tv)
=>
  (printout t "time " ?a ": car departs from " ?f " and goes " ?t crlf)
  (modify ?c (departure ?tv))
  (retract ?turn)
  (assert (turn (+ 1 ?tv)))
)
